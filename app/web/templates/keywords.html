{% extends "base.html" %}
{% block title %}Keywords Â· tg-keyword-watcher{% endblock %}

{% block content %}
<h1 class="h1">Keywords</h1>

<div class="card">
    <div class="card__title">Manage keywords</div>

    {% if error %}
    <div class="alert alert--bad">{{ error }}</div>
    {% endif %}

    <div class="toolbar">
        <form method="get" action="/keywords" class="toolbar__form">
            <input class="input" name="q" type="text" placeholder="Search" value="{{ q }}" />
            <button class="btn btn--icon" type="submit" aria-label="Search">&#128269;</button>
        </form>
        <form method="post" action="/keywords/add" class="toolbar__form">
            <input class="input" name="keyword" type="text" placeholder="Add keyword" />
            <input type="hidden" name="q" value="{{ q }}" />
            <input type="hidden" name="page" value="{{ page }}" />
            <button class="btn btn--primary btn--icon" type="submit" aria-label="Add">&plus;</button>
        </form>
    </div>
</div>

<div class="space"></div>

<div class="card">
    <div class="card__title">Keywords</div>
    <div class="muted small">Total: {{ total }}</div>

    <div class="space"></div>

    {% if keywords %}
    <div class="table">
        <div class="table__row table__row--head">
            <div class="table__cell table__cell--num">#</div>
            <div class="table__cell">Keyword</div>
            <div class="table__cell table__cell--actions">Actions</div>
        </div>
        {% for keyword in keywords %}
        <div class="table__row">
            <div class="table__cell table__cell--num">{{ offset + loop.index }}</div>
            <div class="table__cell mono">{{ keyword }}</div>
            <div class="table__cell table__cell--actions">
                <form method="post" action="/keywords/delete">
                    <input type="hidden" name="keyword" value="{{ keyword }}" />
                    <input type="hidden" name="q" value="{{ q }}" />
                    <input type="hidden" name="page" value="{{ page }}" />
                    <button class="btn btn--ghost btn--icon" type="submit" aria-label="Delete">&#128465;</button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>

    <div class="space"></div>

    <div class="pagination">
        {% if page > 1 %}
        <a class="btn btn--ghost btn--icon" href="/keywords?q={{ q|urlencode }}&page={{ page - 1 }}" aria-label="Prev">&larr;</a>
        {% else %}
        <span class="btn btn--ghost btn--disabled btn--icon" aria-hidden="true">&larr;</span>
        {% endif %}
        <span class="muted small">Page {{ page }} of {{ total_pages }}</span>
        {% if page < total_pages %}
        <a class="btn btn--ghost btn--icon" href="/keywords?q={{ q|urlencode }}&page={{ page + 1 }}" aria-label="Next">&rarr;</a>
        {% else %}
        <span class="btn btn--ghost btn--disabled btn--icon" aria-hidden="true">&rarr;</span>
        {% endif %}
    </div>
    {% else %}
    <div class="muted">No keywords yet</div>
    {% endif %}
</div>
{% endblock %}
